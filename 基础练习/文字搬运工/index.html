<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>文字搬运工</title>
    <link rel="stylesheet" href="./index.css">
</head>

<body>
    <div class="bg">
        <div id="box">
            <textarea>妙味课堂是一支充满温馨并且极富人情味的IT培训团队；2010-2011年，妙味深度关注WEB前端开发领域，为此精心研发出一套灵活而充满趣味的JavaScript课程。2011-2013年，妙味精准研发出最新HTML5\CSS3课程，并推出远程培训课程方案，尝试将线下优良的培训模式移植到远程网络培训中，希望尽最大努力，将一种快乐愉悦的授课体验、结合HTML\CSS\JS知识点，精准传递给妙味课堂的每一位学员。</textarea>
            <div>
                <a href="javascript:;"></a>
                <span>0/0</span>
                <ul>
                    <li class="active"></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>

            <p></p>
        </div>
    </div>
    <script type="text/javascript">
        var btn = document.querySelector("a");
        var textarea = document.querySelector("textarea");
        var p = document.querySelector("p");
        var span = document.querySelector("span");
        var ul = document.querySelector("ul");
        var lis = ul.querySelectorAll("li");
        var timer = null;
        var iNow = 0;

        btn.onclick = function(){
            clearInterval(timer);
            var len = textarea.value.length;
            ul.style.opacity = 1;
            timer = setInterval(function(){
                var text = textarea.value;
                p.innerHTML += text[0];
                textarea.value = text.substring(1);
                span.innerHTML = p.innerHTML.length+" / "+ len;
                iNow++;
                if(iNow === 8){ iNow = 0}
                var prevInow = iNow === 0 ? 7 : iNow-1;
                lis[iNow].className = "active";
                lis[prevInow].className = "";
                if(text.length === 1){
                    clearInterval(timer);
                    ul.style.opacity = 0;
                }
            },30);
            
        }
    </script>
</body>

</html>
